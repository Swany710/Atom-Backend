# N8N Railway Environment Variables
# Copy these to your Railway N8N service environment variables

# ============================================
# CORE N8N CONFIGURATION
# ============================================

# Port (Railway will handle this automatically, but N8N needs to know)
N8N_PORT=5678

# Protocol - use https for production
N8N_PROTOCOL=https

# Host - Railway will inject RAILWAY_PUBLIC_DOMAIN
N8N_HOST=${{RAILWAY_PUBLIC_DOMAIN}}

# Webhook URL - construct from Railway domain
WEBHOOK_URL=https://${{RAILWAY_PUBLIC_DOMAIN}}

# ============================================
# DATABASE CONFIGURATION (Use your Supabase)
# ============================================

# Database type
DB_TYPE=postgresdb

# Supabase connection string format:
# postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
DB_POSTGRESDB_HOST=aws-0-us-east-1.pooler.supabase.com
DB_POSTGRESDB_PORT=6543
DB_POSTGRESDB_DATABASE=postgres
DB_POSTGRESDB_USER=postgres.[your-project-ref]
DB_POSTGRESDB_PASSWORD=[your-supabase-password]

# Or use full connection string (RECOMMENDED):
# DB_POSTGRESDB_CONNECTION_URL=postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres

# Schema for N8N tables (keeps N8N data separate from your app data)
DB_POSTGRESDB_SCHEMA=n8n

# ============================================
# SECURITY & AUTHENTICATION
# ============================================

# Basic Auth for N8N UI (CHANGE THESE!)
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=[generate-strong-password]

# Encryption key for credentials (GENERATE A STRONG KEY!)
# Generate with: openssl rand -base64 32
N8N_ENCRYPTION_KEY=[your-encryption-key-here]

# ============================================
# EXECUTION & PERFORMANCE
# ============================================

# Execution process (main for Railway to avoid issues)
EXECUTIONS_PROCESS=main

# Execution data settings
EXECUTIONS_DATA_SAVE_ON_ERROR=all
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all
EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true

# Execution timeout (in seconds)
EXECUTIONS_TIMEOUT=300
EXECUTIONS_TIMEOUT_MAX=600

# ============================================
# EXTERNAL SERVICES INTEGRATIONS
# ============================================

# Email provider configuration
EMAIL_PROVIDER=gmail

# Gmail OAuth (you'll set this up later)
GOOGLE_CLIENT_ID=159965259988-2tko2jssn8ojfq6h27v8ca0e4ck14n02.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=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
GOOGLE_REDIRECT_URI=https://atom-backend-production-8a1e.up.railway.app/

# OpenAI (reuse from your NestJS backend)
# OPENAI_API_KEY=[your-openai-api-key]

# ============================================
# WORKFLOW & NODE CONFIGURATION
# ============================================

# Enable all community nodes
N8N_COMMUNITY_NODES_ENABLED=true

# Timezone
GENERIC_TIMEZONE=America/Chicago
TIMEZONE=America/Chicago

# ============================================
# CORS & SECURITY HEADERS
# ============================================

# Allow your frontend to call N8N webhooks
N8N_CORS_ENABLED=true
N8N_CORS_ORIGINS=https://[your-frontend-domain].up.railway.app,https://[your-backend-domain].up.railway.app

# ============================================
# LOGGING & DEBUGGING
# ============================================

# Log level (info, debug, warn, error)
N8N_LOG_LEVEL=info

# Log output
N8N_LOG_OUTPUT=console

# ============================================
# OPTIONAL: SMTP FOR EMAIL NOTIFICATIONS
# ============================================

# N8N_EMAIL_MODE=smtp
# N8N_SMTP_HOST=smtp.gmail.com
# N8N_SMTP_PORT=587
# N8N_SMTP_USER=[your-email]
# N8N_SMTP_PASS=[your-app-password]
# N8N_SMTP_SENDER=[your-email]

# ============================================
# NOTES
# ============================================
# 
# After deployment:
# 1. Access N8N UI at: https://[your-n8n-domain].up.railway.app
# 2. Login with N8N_BASIC_AUTH_USER and N8N_BASIC_AUTH_PASSWORD
# 3. Configure OAuth credentials for Gmail, Google Calendar
# 4. Create your first workflow
# 5. Test webhook endpoints from your NestJS backend
#
